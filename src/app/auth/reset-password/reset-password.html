<div class="min-h-[70vh] flex items-start justify-center py-12">
  <div
    class="w-full max-w-md rounded-2xl border border-gray-200 dark:border-gray-800 bg-white/90 dark:bg-gray-900/80 shadow-xl shadow-gray-200/40 dark:shadow-black/30 backdrop-blur-sm"
  >
    <!-- Header -->
    <div class="px-6 pt-6 pb-2 text-center">
      <h2 class="text-2xl font-bold tracking-tight text-gray-900 dark:text-gray-100">
        Reset Your Password
      </h2>
      <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">Enter your new password below</p>
    </div>

    <div class="px-6 pb-6">
      <!-- Error Message -->
      @if(errorMessage) {
      <div
        class="mb-4 rounded-xl border border-red-200 dark:border-red-900/60 bg-red-50 dark:bg-red-900/30 px-4 py-3 text-red-700 dark:text-red-300"
      >
        {{ errorMessage }}
      </div>
      }

      <!-- Success Message -->
      @if(isSuccess) {
      <div
        class="mb-4 rounded-xl border border-green-200 dark:border-green-900/60 bg-green-50 dark:bg-green-900/30 px-4 py-3 text-green-700 dark:text-green-300"
      >
        <p>Your password has been successfully reset.</p>
        <p class="mt-4 text-center">
          <a
            routerLink="/auth/login"
            class="font-medium text-indigo-600 dark:text-indigo-300 hover:text-indigo-500 dark:hover:text-indigo-200"
          >
            Back to Login
          </a>
        </p>
      </div>
      }

      <!-- Reset Password Form -->
      @if(!isSuccess && token) {
      <form [formGroup]="resetForm" (ngSubmit)="onSubmit()" class="space-y-4">
        <!-- New Password -->
        <div>
          <label class="mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300"
            >New Password</label
          >
          <input
            type="password"
            formControlName="password"
            placeholder="Enter new password"
            class="w-full rounded-xl border border-gray-300 dark:border-gray-800 bg-white/90 dark:bg-gray-900/80 px-3 py-2 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 shadow-sm focus:border-transparent focus:ring-2 focus:ring-indigo-500 transition"
            [class.border-red-500]="
              resetForm.get('password')?.touched && resetForm.get('password')?.errors
            "
            [class.ring-2]="resetForm.get('password')?.touched && resetForm.get('password')?.errors"
            [class.ring-red-200]="
              resetForm.get('password')?.touched && resetForm.get('password')?.errors
            "
          />
          @if(resetForm.get('password')?.touched && resetForm.get('password')?.errors) {
          <div class="mt-1 text-sm text-red-600 dark:text-red-400">
            {{ getFieldError('password') }}
          </div>
          }
        </div>

        <!-- Confirm Password -->
        <div>
          <label class="mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300"
            >Confirm Password</label
          >
          <input
            type="password"
            formControlName="confirmPassword"
            placeholder="Confirm new password"
            class="w-full rounded-xl border border-gray-300 dark:border-gray-800 bg-white/90 dark:bg-gray-900/80 px-3 py-2 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 shadow-sm focus:border-transparent focus:ring-2 focus:ring-indigo-500 transition"
            [class.border-red-500]="
              resetForm.get('confirmPassword')?.touched &&
              (resetForm.get('confirmPassword')?.errors || resetForm.hasError('mismatch'))
            "
            [class.ring-2]="
              resetForm.get('confirmPassword')?.touched &&
              (resetForm.get('confirmPassword')?.errors || resetForm.hasError('mismatch'))
            "
            [class.ring-red-200]="
              resetForm.get('confirmPassword')?.touched &&
              (resetForm.get('confirmPassword')?.errors || resetForm.hasError('mismatch'))
            "
          />
          @if(resetForm.get('confirmPassword')?.touched && (resetForm.get('confirmPassword')?.errors
          || resetForm.hasError('mismatch'))) {
          <div class="mt-1 text-sm text-red-600 dark:text-red-400">
            {{ getFieldError('confirmPassword') }}
          </div>
          }
        </div>

        <!-- Submit Button -->
        <button
          type="submit"
          class="group relative inline-flex w-full items-center justify-center gap-2 rounded-xl bg-indigo-600 px-4 py-2.5 font-semibold text-white shadow-sm shadow-indigo-600/20 transition-all duration-200 hover:-translate-y-0.5 hover:bg-indigo-500 active:translate-y-0 active:scale-95 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500 disabled:cursor-not-allowed disabled:opacity-60"
          [disabled]="isLoading"
        >
          @if(!isLoading) {
          <span>Reset Password</span>
          } @else {
          <span>Processing...</span>
          }
        </button>
      </form>
      }
    </div>
  </div>
</div>
